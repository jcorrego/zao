if(function(i){i.fn.wcsvi_variation_form=function(){var i=this,e=(i.data("product_variations"),!1);return i.on("click",".reset_variations",function(i){i.preventDefault(),e=!0,WOOSVI.STARTS.loadImages(!0),WOOSVI.STARTS.imagesLoaded(!0),setTimeout(function(){e=!1},500)}).on("show_variation",function(){WOOSVI.STARTS.showVariation()}).on("change",".variations select",function(){}).on("focusin touchstart",".variations select",function(){e=!1}).on("found_variation",function(){}).on("check_variations",function(){}).on("update_variation_values",function(){}),i.trigger("wc_variation_form"),i},i(function(){"undefined"!=typeof wc_add_to_cart_variation_params&&i(".variations_form").each(function(){i(this).wcsvi_variation_form()}),WOOSVI.STARTS.init()})}(jQuery,window,document),WOOSVI){if(WOOSVI&&"object"!=typeof WOOSVI)throw new Error("WOOSVI is not an Object type")}else var WOOSVI={};jQuery.noConflict(),WOOSVI.STARTS=function(i){var e=i("form.variations_form"),a=i("div#woosvi_strap"),t=!1,o=e.find(".variations select").length>0,n='<img src="{{image_src}}" alt="{{image_alt}}" title="{{image_title}}" data-svikey="{{image_svikey}}" data-woosvislug="{{image_woosvislug}}" data-svizoom-image="{{image_svizoom}}" srcset="{{image_srcset}}" sizes="{{image_sizes}}" width="{{image_width}}" height="{{image_height}}">',s="1"==WOOSVIDATA.hide_thumbs,r="1"==WOOSVIDATA.lens,l="1"==WOOSVIDATA.lightbox,m=!1,d=!1,u="undefined"!=typeof WOOSVIDATA.gallery.thumbs&&WOOSVIDATA.gallery.thumbs.length>0,v=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase()),g=(navigator.userAgent.indexOf("Chrome")>-1,navigator.userAgent.indexOf("MSIE")>-1,navigator.userAgent.indexOf("Firefox")>-1,navigator.userAgent.indexOf("Safari")>-1,navigator.userAgent.toLowerCase().indexOf("op")>-1,e.find(".reset_variations"),"1"==WOOSVIDATA.imagesloaded);return{NAME:"Application initialize module",VERSION:WOOSVIDATA.jsversion,init:function(){v&&(r=!1),"undefined"==typeof wc_add_to_cart_variation_params&&(s=!1);var i=" columns-"+WOOSVIDATA.columns;a.find("ul.svithumbnails li").length>0?a.find("ul.svithumbnails li").remove():a.find("div#woosvithumbs").prepend('<ul class="svithumbnails'+i+'"></ul>'),s&&a.find("div#woosvithumbs").hide(),WOOSVI.STARTS.loadImages(),WOOSVI.STARTS.imagesLoaded(),WOOSVI.STARTS.ActivateSwapImage(),WOOSVI.STARTS.prettyPhoto()},reset:function(){},loadImages:function(e){e&&(d=!1),a.find("div#woosvimain").html(""),a.find("ul.svithumbnails li").remove(),i("div#woosvimain").prepend('<div class="sviLoader_thumb"></div>');var t=WOOSVI.STARTS.getActiveVariationsInSelect();return t.length>0&&!e?void WOOSVI.STARTS.showVariation():(!o&&WOOSVIDATA.gallery.thumbs&&(WOOSVIDATA.gallery.main_image?i("div#woosvimain").append(i(WOOSVI.STARTS.buildImgTag(WOOSVIDATA.gallery.main_image.fullimg))):u&&i("div#woosvimain").append(i(WOOSVI.STARTS.buildImgTag(WOOSVIDATA.gallery.thumbs[0].fullimg)))),!WOOSVIDATA.gallery.thumbs&&i("div#woosvimain img").length<1&&(WOOSVIDATA.gallery.main_image?i("div#woosvimain").append(i(WOOSVI.STARTS.buildImgTag(WOOSVIDATA.gallery.main_image.fullimg))):u&&i("div#woosvimain").append(i(WOOSVI.STARTS.buildImgTag(WOOSVIDATA.gallery.thumbs[0].fullimg)))),o&&i("div#woosvimain img").length<1&&(WOOSVIDATA.gallery.main_image?i("div#woosvimain").append(i(WOOSVI.STARTS.buildImgTag(WOOSVIDATA.gallery.main_image.fullimg))):u&&i("div#woosvimain").append(i(WOOSVI.STARTS.buildImgTag(WOOSVIDATA.gallery.thumbs[0].fullimg)))),WOOSVI.STARTS.loadThumb(WOOSVIDATA.gallery.thumbs,!1),void WOOSVI.STARTS.reOrderThumbs())},buildImgTag:function(i){return"undefined"!=typeof i?n.replace(/{{image_src}}/g,i.src).replace("{{image_class}}",i["class"]).replace("{{image_alt}}",i.alt).replace("{{image_title}}",i.title).replace("{{image_woosvislug}}",i["data-woosvislug"]).replace("{{image_svizoom}}",i["data-svizoom-image"]).replace("{{image_svikey}}",i["data-svikey"]).replace("{{image_srcset}}",i.srcset?i.srcset:"").replace("{{image_sizes}}",i.sizes?i.sizes:"").replace("{{image_width}}",i.width?i.width:"").replace("{{image_height}}",i.height?i.height:""):void 0},loadMain:function(e){if(e){var t=[""],o=WOOSVI.STARTS.itemBuilder(e,t,!0);a.find("ul.svithumbnails").append(i(o))}},loadThumb:function(e,t){if(!e)return void(t||WOOSVI.STARTS.loadMain(WOOSVIDATA.gallery.main_image));var o=Object.keys(e).length;t||WOOSVI.STARTS.loadMain(WOOSVIDATA.gallery.main_image),WOOSVI.STARTS.reset(),jQuery.each(e,function(e,t){var n,s="",r=[""],l=a.find("ul.svithumbnails li").size();0!==l&&l%WOOSVIDATA.columns!==0||r.push("first"),(l+1)%WOOSVIDATA.columns===0&&r.push("last"),l===o&&r.push("last"),s=WOOSVI.STARTS.itemBuilder(t,r),n=a.find("ul.svithumbnails li").map(function(){return i(this).data("thumb")===i(s).data("thumb")?!0:void 0}).get(),jQuery.isEmptyObject(n)&&a.find("ul.svithumbnails").append(i(s))})},reOrderThumbs:function(){jQuery.each(a.find("ul.svithumbnails li"),function(e,a){var t=[""];0!==e&&e%WOOSVIDATA.columns!==0||t.push("first"),(e+1)%WOOSVIDATA.columns===0&&t.push("last"),i(a).removeClass("first_pre").removeClass("first").removeClass("last").addClass(t.join(" "))})},itemBuilder:function(i,e){var a="";return a+='<li data-thumb="'+i.thumb[0]+'" data-src="'+i.full[0]+'" class="'+e.join(" ")+'">',a+='<div class="sviLoader_thumb"></div>',a+=WOOSVI.STARTS.buildImgTag(i.thumbimg),a+="</li>"},imagesLoaded:function(e){e&&(d=!1),t||(g?i.getScript("//cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.1/imagesloaded.pkgd.min.js").done(function(){WOOSVI.STARTS.runImageProcess(e)}).fail(function(){i("div.log").text("Triggered ajaxError handler.")}):WOOSVI.STARTS.runImageProcess(e))},runImageProcess:function(e){t=!0,a.imagesLoaded().always(function(){a.find(".sviLoader_thumb").fadeOut().remove(),i(".sivmainloader").length>0?i(".sivmainloader").fadeOut("fast",function(){a.find(".svihidden").removeClass("svihidden"),WOOSVI.STARTS.completeAction(e)}).remove():(a.removeClass("svihidden"),WOOSVI.STARTS.completeAction(e))}).done(function(){}).progress(function(){}).fail(function(){a.find(".sviLoader_thumb").fadeOut().remove(),t=!1})},completeAction:function(e){e&&s&&a.find("div#woosvithumbs").hide(),a.find(".sviLoader_thumb").fadeOut().remove(),t=!1,WOOSVI.STARTS.LoadLens(),!m&&l&&(m=!0,i('a[rel^="prettyphoto"], .prettyphoto').prettyPhoto({hook:"data-rel",social_tools:!1,theme:"pp_woocommerce",horizontal_padding:20,opacity:.8,deeplinking:!1}))},showVariation:function(){d=!1;var e=[];i.each(WOOSVI.STARTS.getActiveVariationsInSelect(),function(i,a){var t=a.replace(/ /g,"").toLowerCase();if(!t)return WOOSVI.STARTS.getActiveVariationsInSelect(),!1;var o=WOOSVI.STARTS.getVariationImages(t);o&&(e=e.concat(o))}),e.length>0?(a.find("ul.svithumbnails li").remove(),s&&a.find("div#woosvithumbs").show(),a.find("div#woosvimain").html("").prepend(i(WOOSVI.STARTS.buildImgTag(e[0].fullimg))),WOOSVI.STARTS.loadThumb(e,!0),WOOSVI.STARTS.reOrderThumbs(),WOOSVI.STARTS.imagesLoaded()):($is_reset=!0,WOOSVI.STARTS.loadImages(!0),WOOSVI.STARTS.imagesLoaded(!0),setTimeout(function(){$is_reset=!1},500))},getActiveVariationsInSelect:function(){var i=e.find(".variations select").map(function(){return""!==this.value?decodeURI(this.value):void 0}).get();return i},getVariationImages:function(i){var e=[];if(i){jQuery.each(WOOSVIDATA.gallery.thumbs,function(a,t){t.woosvi_slug&&decodeURIComponent(t.woosvi_slug.replace(/ /g,"").toLowerCase())==i&&e.push(t)}),WOOSVIDATA.gallery.main_image.woosvi_slug&&decodeURIComponent(WOOSVIDATA.gallery.main_image.woosvi_slug.replace(/ /g,"").toLowerCase())==i&&e.push(WOOSVIDATA.gallery.main_image);var a=Object.keys(e).length;return a>0?e:!1}},ActivateSwapImage:function(){a.on("click","ul.svithumbnails img",function(){WOOSVI.STARTS.initSwap(this)})},initSwap:function(e){var a=i(e).data("svikey"),t=!1;a>=0&&(t=WOOSVIDATA.gallery.thumbs[a]);var o=new Image;t?o.src=t.single[0]:(t=WOOSVIDATA.gallery.main_image,o.src=t.single[0]),i("div#woosvimain img").attr("src")!=o.src&&(i("div#woosvimain").prepend('<div class="sviLoader_thumb"></div>'),i(o).on("load",function(){i("div#woosvimain img").fadeOut("fast").remove(),i("div#woosvimain").prepend(i(WOOSVI.STARTS.buildImgTag(t.fullimg)).hide()),i("div#woosvimain img").fadeIn("fast"),i("div#woosvimain").find(".sviLoader_thumb").fadeOut().remove(),i("div.sviLoader_thumb").remove(),d=!1,WOOSVI.STARTS.LoadLens()}))},LoadLens:function(){if(r&&!d){d=!0,i("div.sviZoomContainer").remove();var e,a;e=i("div#woosvimain .swiper-slide-active img, div#woosvimain>img"),a={container:"sviZoomContainer",attrImageZoomSrc:"svizoom-image",zoomType:"lens",lensShape:"round",lensSize:150,cursor:"pointer",galleryActiveClass:"active",containLensZoom:!0,loadingIcon:!0,zIndex:1e3},e.ezPlus(a)}},prettyPhoto:function(){l&&a.on("click","div#woosvimain img",function(e){e.preventDefault();var a=i(this).data("svizoom-image"),t=i(this).attr("title"),o=[],n=[];i("div#woosvithumbs ul.svithumbnails li, div#woosvithumbs .swiper-slide").each(function(){var e=i(this).find("img").data("svikey"),a=!1;e>=0&&(a=WOOSVIDATA.gallery.thumbs[e]),a?(o.push(a.full[0]),n.push(i(this).find("img").attr("title"))):(o.push(WOOSVIDATA.gallery.main_image.full[0]),n.push(i(this).find("img").attr("title")))}),jQuery.isEmptyObject(o)&&(o.push(a),n.push(t)),jQuery.prettyPhoto.open(o,n),i("div.pp_gallery").find('img[src="'+a+'"]').parent().trigger("click")})}}}(jQuery,window,document);